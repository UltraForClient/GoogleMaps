<!Doctype html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">

    <title>Magazyn mapa</title>

    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen">
    <link rel="stylesheet" href="css/print.css" type="text/css" media="print">
    <link type="text/css" href="css/ui-lightness/jquery-ui-1.8.16.custom.css" rel="stylesheet"/>
</head>

<body>
<div id="fb-root"></div>
<h2>OptiMap - Fastest Roundtrip Solver</h2>
<table class='mainTable'>
    <tr>
        <td class='left' style='vertical-align: top'>
            <div id="leftPanel">
                <div id="accordion" style='width: 300pt'>
                    <h3><a href="#" class='accHeader'>Destinations</a></h3>
                    <div>
                        <label for="addressStr">Add Location by Address:</label>
                        <input name="addressStr" id="addressStr" type="text">
                        <button onclick="addAddress(addressStr.value)">Add!</button>
                    </div>

                    <h3><a href="#" class='accHeader'>Edit Route</a></h3>
                    <div>
                        <div id="routeDrag"></div>
                        <div id="reverseRoute"></div>
                    </div>
                </div>

                <input id="button1" class="calcButton" type="button" value="Calculate Fastest Roundtrip" onClick="directions(0)">
                <input id="button2" class="calcButton" type="button" value="Calculate Fastest A-Z Trip" onClick="directions(1)">
                <input id='button3' class="calcButton" type='button' value='Start Over Again' onClick='startOver()'>
            </div>

        </td>
        <td class='right' style='vertical-align: top'>
            <div id="map" class="myMap"></div>
        </td>
    </tr>
</table>

<!-- Hidden stuff -->
<div id="bulkLoader_hidden" style="visibility: hidden;">
    <form name="listOfLocations" onSubmit="clickedAddList(); return false;">
        <textarea name="inputList" rows="10" cols="70">One destination per line</textarea><br>
        <input type="button" value="Add list of locations" onClick="clickedAddList()">
    </form>
</div>
<div id="exportData_hidden" style="visibility: hidden;"></div>
<div id="exportLabelData_hidden" style="visibility: hidden;"></div>
<div id="exportAddrData_hidden" style="visibility: hidden;"></div>
<div id="exportOrderData_hidden" style="visibility: hidden;"></div>
<div id="durationsData_hidden" style="visibility: hidden;"></div>

<div id="dialogProgress" title="Calculating route...">
    <div id="progressBar"></div>
</div>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
<script type="application/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="js/BpTspSolver.js"></script>
<script type="text/javascript" src="js/directions-export.js"></script>
<script type="text/javascript" src="js/tsp.js"></script>

<script type="text/javascript">
    jQuery.noConflict();

    loadAtStart(50, 20, 6)


    function toggle(divId) {
        var divObj = document.getElementById(divId);
        if (divObj.innerHTML == "") {
            divObj.innerHTML = document.getElementById(divId + "_hidden").innerHTML;
            document.getElementById(divId + "_hidden").innerHTML = "";
        } else {
            document.getElementById(divId + "_hidden").innerHTML = divObj.innerHTML;
            divObj.innerHTML = "";
        }
    }

    jQuery(function () {
        jQuery("#accordion").accordion({
            collapsible: true,
            autoHeight: false,
            clearStyle: true
        });
        jQuery("input:button").button();
        jQuery("#dialogProgress").dialog({
            height: 140,
            modal: true,
            autoOpen: false
        });
        jQuery("#progressBar").progressbar({value: 0});
        jQuery("#dialogTomTom").dialog({
            height: 480,
            width: 640,
            modal: true,
            autoOpen: false
        });
        jQuery("#dialogGarmin").dialog({
            height: 480,
            width: 640,
            modal: true,
            autoOpen: false
        });
        jQuery('.myMap').height(jQuery(window).height() - 100);
    });

    (function () {
        var po = document.createElement('script');
        po.type = 'text/javascript';
        po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(po, s);
    })();

</script>

<script>
    google.maps.event.addListener(map, 'click', event => {
        const lat = event.latLng.lat();
        const lng = event.latLng.lng();
        addAddress(lat + ', ' + lng)
    });
</script>
</body>
</html>
